<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >	

<mapper namespace="funfun.repository.MainRepo">
 	<resultMap type="funfun.vo.MainViewProject" id="MainViewProjectMap"></resultMap>
	<select id="getMainViewProjectList" parameterType="int" resultMap="MainViewProjectMap">
	 <![CDATA[
		SELECT * FROM
		(
		SELECT pro_code code, nvl(pro_title, ' ') title,
		nvl(CATE_TITLE, ' ') category, nvl(pro_target, 0) targetFunding,
		nvl(PRO_FINISH_DATE, current_date)-current_date restDay,
		nvl(PRO_IMAGE, ' ') image, nvl(pro_curr, '정지') pro_curr,
		nvl(PRO_MONEY, 0) currentFunding FROM project WHERE pro_curr='정상' AND PRO_SUB_DATE IS NOT NULL ORDER BY PRO_FINISH_DATE ASC) a WHERE rownum<10
		]]>
	 </select>
	
</mapper>